# ggvis - wprowadzenie
Maciej Beręsewicz  
24 May 2015  



## ggvis vs ggplot2

Podstawowe zmiany:

* zamiast **layer, geom** -> używamy **layer_** 
* zamiast **stat** -> używamy **compute**
* zamiast **aes()** -> używamy **props()**
* zamiast **ggplot()** -> używamy **ggvis()**
* łączymy komponenty używając **%>%** zamiast **+**

## ggvis - ograniczenia

* brak funkcji **facet**
* zdecydowanie mniejsza możliwość zmiany elementów wykresu w porównaniu do ggplot2
* pakiet jest w tej chwili rozwijany

## Stwórzmy pierwszy wykres - zmienna ciągła


```r
mtcars %>%
  ggvis(x = ~mpg) 
```

<!--html_preserve--><div id="plot_id758378061-container" class="ggvis-output-container">
<div id="plot_id758378061" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id758378061_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id758378061" data-renderer="svg">SVG</a>
 | 
<a id="plot_id758378061_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id758378061" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id758378061_download" class="ggvis-download" data-plot-id="plot_id758378061">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id758378061_spec = {
  "data": [
    {
      "name": ".0/bin1/stack2",
      "format": {
        "type": "csv",
        "parse": {
          "xmin_": "number",
          "xmax_": "number",
          "stack_upr_": "number",
          "stack_lwr_": "number"
        }
      },
      "values": "\"xmin_\",\"xmax_\",\"stack_upr_\",\"stack_lwr_\"\n9.5,10.5,2,0\n10.5,11.5,0,0\n11.5,12.5,0,0\n12.5,13.5,1,0\n13.5,14.5,1,0\n14.5,15.5,5,0\n15.5,16.5,2,0\n16.5,17.5,1,0\n17.5,18.5,2,0\n18.5,19.5,3,0\n19.5,20.5,1,0\n20.5,21.5,5,0\n21.5,22.5,0,0\n22.5,23.5,2,0\n23.5,24.5,1,0\n24.5,25.5,0,0\n25.5,26.5,1,0\n26.5,27.5,1,0\n27.5,28.5,0,0\n28.5,29.5,0,0\n29.5,30.5,2,0\n30.5,31.5,0,0\n31.5,32.5,1,0\n32.5,33.5,0,0\n33.5,34.5,1,0"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n8.25\n35.75"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n5.25"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "rect",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "fill": {
            "value": "#333333"
          },
          "x": {
            "scale": "x",
            "field": "data.xmin_"
          },
          "x2": {
            "scale": "x",
            "field": "data.xmax_"
          },
          "y": {
            "scale": "y",
            "field": "data.stack_upr_"
          },
          "y2": {
            "scale": "y",
            "field": "data.stack_lwr_"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/bin1/stack2"
          }
        }
      },
      "from": {
        "data": ".0/bin1/stack2"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "count"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id758378061").parseSpec(plot_id758378061_spec);
</script><!--/html_preserve-->

## Stwórzmy pierwszy wykres - zmienna jakościowa


```r
mtcars %>%
  mutate(am = as.factor(am)) %>%
  ggvis(x = ~am) 
```

<!--html_preserve--><div id="plot_id891400290-container" class="ggvis-output-container">
<div id="plot_id891400290" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id891400290_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id891400290" data-renderer="svg">SVG</a>
 | 
<a id="plot_id891400290_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id891400290" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id891400290_download" class="ggvis-download" data-plot-id="plot_id891400290">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id891400290_spec = {
  "data": [
    {
      "name": ".0/count1/stack2",
      "format": {
        "type": "csv",
        "parse": {
          "stack_lwr_": "number",
          "stack_upr_": "number"
        }
      },
      "values": "\"x_\",\"stack_lwr_\",\"stack_upr_\"\n\"0\",0,19\n\"1\",0,13"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"0\"\n\"1\""
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n19.95"
    }
  ],
  "scales": [
    {
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "name": "x",
      "type": "ordinal",
      "points": false,
      "padding": 0.1,
      "sort": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "rect",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "fill": {
            "value": "#333333"
          },
          "x": {
            "scale": "x",
            "field": "data.x_"
          },
          "y": {
            "scale": "y",
            "field": "data.stack_lwr_"
          },
          "y2": {
            "scale": "y",
            "field": "data.stack_upr_"
          },
          "width": {
            "scale": "x",
            "band": true
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/count1/stack2"
          }
        }
      },
      "from": {
        "data": ".0/count1/stack2"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "am"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "count"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id891400290").parseSpec(plot_id891400290_spec);
</script><!--/html_preserve-->

## Stwórzmy pierwszy wykres - wykres rozrzutu


```r
mtcars %>%  ggvis(~wt, ~mpg) %>% layer_points()
```

<!--html_preserve--><div id="plot_id378098962-container" class="ggvis-output-container">
<div id="plot_id378098962" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id378098962_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id378098962" data-renderer="svg">SVG</a>
 | 
<a id="plot_id378098962_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id378098962" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id378098962_download" class="ggvis-download" data-plot-id="plot_id378098962">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id378098962_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id378098962").parseSpec(plot_id378098962_spec);
</script><!--/html_preserve-->

## Stwórzmy pierwszy wykres - wykres rozrzutu + regresja


```r
mtcars %>%  ggvis(~wt, ~mpg) %>%  layer_points()  %>%
  layer_model_predictions(model = "lm", se = TRUE)
```

<!--html_preserve--><div id="plot_id899386186-container" class="ggvis-output-container">
<div id="plot_id899386186" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id899386186_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id899386186" data-renderer="svg">SVG</a>
 | 
<a id="plot_id899386186_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id899386186" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id899386186_download" class="ggvis-download" data-plot-id="plot_id899386186">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id899386186_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": ".0/model_prediction1",
      "format": {
        "type": "csv",
        "parse": {
          "resp_upr_": "number",
          "pred_": "number",
          "resp_lwr_": "number",
          "resp_": "number"
        }
      },
      "values": "\"resp_upr_\",\"pred_\",\"resp_lwr_\",\"resp_\"\n31.4341217313206,1.513,26.9637596243046,29.1989406778126\n31.1204993874088,1.56250632911392,26.748211630978,28.9343555091934\n30.8072470380303,1.61201265822785,26.532293643118,28.6697703405742\n30.4943905399572,1.66151898734177,26.3159798039527,28.4051851719549\n30.1819579750846,1.7110253164557,26.0992420315869,28.1406000033357\n29.8699798618842,1.76053164556962,25.8820498075489,27.8760148347165\n29.5584893857579,1.81003797468354,25.6643699464367,27.6114296660973\n29.2475226490581,1.85954430379747,25.4461663458981,27.3468444974781\n28.9371189411946,1.90905063291139,25.2273997165231,27.0822593288588\n28.6273210287383,1.95855696202532,25.0080272917409,26.8176741602396\n28.3181754647066,2.00806329113924,24.7880025185342,26.5530889916204\n28.0097329152165,2.05756962025316,24.5672747307859,26.2885038230012\n27.7020485003464,2.10707594936709,24.3457888084175,26.023918654382\n27.3951821442752,2.15658227848101,24.1234848272503,25.7593334857627\n27.0891989274822,2.20608860759494,23.9002977068049,25.4947483171435\n26.7841694309033,2.25559493670886,23.6761568661453,25.2301631485243\n26.4801700583702,2.30510126582278,23.4509859014399,24.9655779799051\n26.1772833193625,2.35460759493671,23.2247023032092,24.7009928112859\n25.8755980490886,2.40411392405063,22.9972172362447,24.4364076426666\n25.5752095372801,2.45362025316456,22.7684354108148,24.1718224740474\n25.276219531088,2.50312658227848,22.5382550797684,23.9072373054282\n24.9787360715631,2.55263291139241,22.3065682020549,23.642652136809\n24.6828731181045,2.60213924050633,22.073260818275,23.3780669681898\n24.3887499120139,2.65164556962025,21.8382136871272,23.1134817995705\n24.096490030255,2.70115189873418,21.6013032316477,22.8488966309513\n23.8062200853351,2.7506582278481,21.3624028393291,22.5843114623321\n23.5180680386105,2.80016455696203,21.1213845488153,22.3197262937129\n23.2321611137817,2.84967088607595,20.8781211364057,22.0551411250937\n22.9486233256676,2.89917721518987,20.6324885872813,21.7905559564744\n22.6675726760022,2.9486835443038,20.3843688997083,21.5259707878552\n22.3891181105935,2.99818987341772,20.1336531278785,21.261385619236\n22.1133563760938,3.04769620253165,19.8802445251398,20.9968004506168\n21.8403689531932,3.09720253164557,19.624061610802,20.7322152819976\n21.5702192684414,3.14670886075949,19.3650409583153,20.4676301133783\n21.3029503917649,3.19621518987342,19.1031394977534,20.2030449447591\n21.0385834062175,3.24572151898734,18.8383361460623,19.9384597761399\n20.7771165901197,3.29522784810127,18.5706326249216,19.6738746075207\n20.5185254843377,3.34473417721519,18.3000533934652,19.4092894389015\n20.2627638386563,3.39424050632911,18.0266447019082,19.1447042702822\n20.0097653533643,3.44374683544304,17.7504728499618,18.880119101663\n19.7594460674074,3.49325316455696,17.4716217986802,18.6155339330438\n19.5117072017912,3.54275949367089,17.190190327058,18.3509487644246\n19.266438250352,3.59226582278481,16.9062889412588,18.0863635958054\n19.023520118358,3.64177215189873,16.6200367360143,17.8217784271861\n18.7828281372767,3.69127848101266,16.3315583798572,17.5571932585669\n18.5442348238948,3.74078481012658,16.0409813560006,17.2926080899477\n18.307612296075,3.79029113924051,15.748433546582,17.0280229213285\n18.0728342993708,3.83979746835443,15.4540412060478,16.7634377527093\n17.8397778342311,3.88930379746835,15.157927333949,16.49885258409\n17.6083244005099,3.93881012658228,14.8602104304317,16.2342674154708\n17.3783608941716,3.9883164556962,14.5610035995316,15.9696822468516\n17.1497802013801,4.03782278481013,14.2604139550846,15.7050970782324\n16.9224815391307,4.08732911392405,13.9585422800956,15.4405119096132\n16.6963705909696,4.13683544303798,13.6554828910183,15.1759267409939\n16.4713594827389,4.1863417721519,13.3513236620105,14.9113415723747\n16.2473666380091,4.23584810126582,13.0461461695019,14.6467564037555\n16.0243165469005,4.28535443037975,12.740025923372,14.3821712351363\n15.8021394760335,4.33486075949367,12.4330326570007,14.1175860665171\n15.5807711417929,4.3843670886076,12.1252306540028,13.8530008978978\n15.3601523641871,4.43387341772152,11.8166790943701,13.5884157292786\n15.1402287143902,4.48337974683544,11.5074324069286,13.3238305606594\n14.9209501655981,4.53288607594937,11.1975406184823,13.0592453920402\n14.7022707540356,4.58239240506329,10.8870496928064,12.794660223421\n14.4841482547477,4.63189873417722,10.5760018548558,12.5300750548017\n14.266543875108,4.68140506329114,10.2644358972571,12.2654898861825\n14.0494219676868,4.73091139240506,9.95238746743981,12.0009047175633\n13.8327497631713,4.78041772151899,9.6398893347169,11.7363195489441\n13.6164971233358,4.82992405063291,9.32697163731397,11.4717343803249\n13.400636313583,4.87943037974684,9.01366210982825,11.2071492117056\n13.185141794249,4.92893670886076,8.69998629192387,10.9425640430864\n12.96999002966,4.97844303797468,8.38596771927446,10.6779788744672\n12.7551593138153,5.02794936708861,8.07162809788066,10.413393705848\n12.5406296115153,5.07745569620253,7.75698746294225,10.1488085372288\n12.3263824137488,5.12696202531646,7.44206432347029,9.88422336860955\n12.1124006061819,5.17646835443038,7.1268757937988,9.61963819999033\n11.8986683496337,5.2259746835443,6.81143771310854,9.35505303137111\n11.685170971489,5.27548101265823,6.49576475401476,9.09046786275189\n11.4718948670624,5.32498734177215,6.17987052120298,8.82588269413267\n11.2588274100015,5.37449367088608,5.86376764102542,8.56129752551345\n11.0459568708893,5.424,5.5474678428992,8.29671235689423"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n4.12984123504415\n35.317626607855"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    },
    {
      "type": "area",
      "properties": {
        "update": {
          "fill": {
            "value": "#333333"
          },
          "y2": {
            "scale": "y",
            "field": "data.resp_upr_"
          },
          "fillOpacity": {
            "value": 0.2
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_lwr_"
          },
          "stroke": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/model_prediction1"
          }
        }
      },
      "from": {
        "data": ".0/model_prediction1"
      }
    },
    {
      "type": "line",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "strokeWidth": {
            "value": 2
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_"
          },
          "fill": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/model_prediction1"
          }
        }
      },
      "from": {
        "data": ".0/model_prediction1"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id899386186").parseSpec(plot_id899386186_spec);
</script><!--/html_preserve-->

## Stwórzmy pierwszy wykres - wykres rozrzutu + regresja (wg punktów)


```r
mtcars %>%  mutate(cyl=as.factor(cyl)) %>% group_by(cyl) %>%
  ggvis(~wt, ~mpg, fill=~cyl) %>% layer_points()  %>%
  layer_model_predictions(model = "lm", se = TRUE)
```

<!--html_preserve--><div id="plot_id551714835-container" class="ggvis-output-container">
<div id="plot_id551714835" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id551714835_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id551714835" data-renderer="svg">SVG</a>
 | 
<a id="plot_id551714835_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id551714835" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id551714835_download" class="ggvis-download" data-plot-id="plot_id551714835">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id551714835_spec = {
  "data": [
    {
      "name": ".0_flat",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"cyl\",\"wt\",\"mpg\"\n\"4\",2.32,22.8\n\"4\",3.19,24.4\n\"4\",3.15,22.8\n\"4\",2.2,32.4\n\"4\",1.615,30.4\n\"4\",1.835,33.9\n\"4\",2.465,21.5\n\"4\",1.935,27.3\n\"4\",2.14,26\n\"4\",1.513,30.4\n\"4\",2.78,21.4\n\"6\",2.62,21\n\"6\",2.875,21\n\"6\",3.215,21.4\n\"6\",3.46,18.1\n\"6\",3.44,19.2\n\"6\",3.44,17.8\n\"6\",2.77,19.7\n\"8\",3.44,18.7\n\"8\",3.57,14.3\n\"8\",4.07,16.4\n\"8\",3.73,17.3\n\"8\",3.78,15.2\n\"8\",5.25,10.4\n\"8\",5.424,10.4\n\"8\",5.345,14.7\n\"8\",3.52,15.5\n\"8\",3.435,15.2\n\"8\",3.84,13.3\n\"8\",3.845,19.2\n\"8\",3.17,15.8\n\"8\",3.57,15"
    },
    {
      "name": ".0",
      "source": ".0_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": ".0/model_prediction1_flat",
      "format": {
        "type": "csv",
        "parse": {
          "resp_upr_": "number",
          "pred_": "number",
          "resp_lwr_": "number",
          "resp_": "number"
        }
      },
      "values": "\"cyl\",\"resp_upr_\",\"pred_\",\"resp_lwr_\",\"resp_\"\n\"4\",34.9800883018005,1.513,27.0744052837557,31.0272467927781\n\"4\",34.7878615744043,1.53422784810127,27.0268836222127,30.9073725983085\n\"4\",34.5963328605434,1.55545569620253,26.9786639471342,30.7874984038388\n\"4\",34.4055423024242,1.5766835443038,26.9297061163141,30.6676242093691\n\"4\",34.2155327168905,1.59791139240506,26.8799673129085,30.5477500148995\n\"4\",34.0263497684374,1.61913924050633,26.8294018724222,30.4278758204298\n\"4\",33.8380421479348,1.64036708860759,26.7779611039855,30.3080016259602\n\"4\",33.6506617556389,1.66159493670886,26.7255931073421,30.1881274314905\n\"4\",33.4642638865707,1.68282278481013,26.6722425874709,30.0682532370208\n\"4\",33.278907415743,1.70405063291139,26.6178506693593,29.9483790425512\n\"4\",33.094654980002,1.72527848101266,26.562354716161,29.8285048480815\n\"4\",32.9115731524215,1.74650632911392,26.5056881548022,29.7086306536118\n\"4\",32.7297326042198,1.76773417721519,26.4477803140646,29.5887564591422\n\"4\",32.5492082480776,1.78896202531646,26.3885562812674,29.4688822646725\n\"4\",32.3700793555192,1.81018987341772,26.3279367848865,29.3490080702029\n\"4\",32.1924296396951,1.83141772151899,26.2658381117713,29.2291338757332\n\"4\",32.016347293513,1.85264556962025,26.2021720690141,29.1092596812635\n\"4\",31.8419249716569,1.87387341772152,26.1368460019308,28.9893854867939\n\"4\",31.6692597036891,1.89510126582278,26.0697628809594,28.8695112923242\n\"4\",31.4984527242664,1.91632911392405,26.0008214714427,28.7496370978545\n\"4\",31.3296092056584,1.93755696202532,25.9299166011113,28.6297629033849\n\"4\",31.1628378774112,1.95878481012658,25.8569395404193,28.5098887089152\n\"4\",30.9982505183714,1.98001265822785,25.7817785105198,28.3900145144456\n\"4\",30.8359613076045,2.00124050632911,25.7043193323473,28.2701403199759\n\"4\",30.6760860232353,2.02246835443038,25.6244462277772,28.1502661255062\n\"4\",30.5187410821409,2.04369620253165,25.5420427799323,28.0303919310366\n\"4\",30.3640424188694,2.06492405063291,25.4569930542644,27.9105177365669\n\"4\",30.2121042092076,2.08615189873418,25.3691828749869,27.7906435420973\n\"4\",30.0630374523529,2.10737974683544,25.2785012429023,27.6707693476276\n\"4\",29.9169484353639,2.12860759493671,25.1848418709519,27.5508951531579\n\"4\",29.7739371139142,2.14983544303797,25.0881048034624,27.4310209586883\n\"4\",29.6340954535847,2.17106329113924,24.9881980748525,27.3111467642186\n\"4\",29.49750578503,2.19229113924051,24.8850393544679,27.1912725697489\n\"4\",29.3642392332396,2.21351898734177,24.778557517319,27.0713983752793\n\"4\",29.2343542847436,2.23474683544304,24.6686940768756,26.9515241808096\n\"4\",29.1078955560778,2.2559746835443,24.5554044166022,26.83164998634\n\"4\",28.9848928216124,2.27720253164557,24.4386587621282,26.7117757918703\n\"4\",28.8653603489254,2.29843037974684,24.3184428458759,26.5919015974006\n\"4\",28.7492965757988,2.3196582278481,24.1947582300632,26.472027402931\n\"4\",28.6366841457288,2.34088607594937,24.0676222711938,26.3521532084613\n\"4\",28.5274903000826,2.36211392405063,23.9370677279007,26.2322790139917\n\"4\",28.4216676064509,2.3833417721519,23.8031420325931,26.112404819522\n\"4\",28.3191549860566,2.40456962025316,23.665906264048,25.9925306250523\n\"4\",28.2198789897303,2.42579746835443,23.5254338714351,25.8726564305827\n\"4\",28.1237552629424,2.4470253164557,23.3818092092836,25.752782236113\n\"4\",28.0306901361137,2.46825316455696,23.235125947173,25.6329080416433\n\"4\",27.9405822767629,2.48948101265823,23.0854854175844,25.5130338471737\n\"4\",27.8533243444002,2.51070886075949,22.9329949610078,25.393159652704\n\"4\",27.7688045964828,2.53193670886076,22.7777663199859,25.2732854582344\n\"4\",27.686908403153,2.55316455696203,22.6199141243764,25.1534112637647\n\"4\",27.6075196387857,2.57439240506329,22.4595544998043,25.033537069295\n\"4\",27.5305219286576,2.59562025316456,22.2968038209931,24.9136628748254\n\"4\",27.455799738566,2.61684810126582,22.1317776221454,24.7937886803557\n\"4\",27.3832393034878,2.63807594936709,21.9645896682843,24.673914485886\n\"4\",27.312729398101,2.65930379746835,21.7953511847317,24.5540402914164\n\"4\",27.2441619571281,2.68053164556962,21.6241702367653,24.4341660969467\n\"4\",27.1774325570663,2.70175949367089,21.4511512478878,24.3142919024771\n\"4\",27.1124407731176,2.72298734177215,21.2763946428972,24.1944177080074\n\"4\",27.0490904262451,2.74421518987342,21.0999966008303,24.0745435135377\n\"4\",26.9872897354914,2.76544303797468,20.9220489026447,23.9546693190681\n\"4\",26.9269513902401,2.78667088607595,20.7426388589567,23.8347951245984\n\"4\",26.8679925561809,2.80789873417721,20.5618493040766,23.7149209301288\n\"4\",26.8103348275276,2.82912658227848,20.3797586437906,23.5950467356591\n\"4\",26.7539041366752,2.85035443037975,20.1964409457036,23.4751725411894\n\"4\",26.6986306310718,2.87158227848101,20.0119660623677,23.3552983467198\n\"4\",26.6444485256997,2.89281012658228,19.8263997788006,23.2354241522501\n\"4\",26.5912959382549,2.91403797468354,19.639803977306,23.1155499577804\n\"4\",26.5391147129223,2.93526582278481,19.4522368136993,22.9956757633108\n\"4\",26.4878502375736,2.95649367088608,19.2637529001086,22.8758015688411\n\"4\",26.43745125828,2.97772151898734,19.0744034904629,22.7559273743715\n\"4\",26.3878696942205,2.99894936708861,18.8842366655831,22.6360531799018\n\"4\",26.3390604553797,3.02017721518987,18.6932975154845,22.5161789854321\n\"4\",26.2909812648498,3.04140506329114,18.5016283170751,22.3963047909625\n\"4\",26.2435924870719,3.0626329113924,18.3092687059137,22.2764305964928\n\"4\",26.1968569629596,3.08386075949367,18.1162558410868,22.1565564020232\n\"4\",26.1507398525278,3.10508860759494,17.9226245625792,22.0366822075535\n\"4\",26.1052084853965,3.1263164556962,17.7284075407712,21.9168080130838\n\"4\",26.0602322193357,3.14754430379747,17.5336354178926,21.7969338186142\n\"4\",26.0157823068645,3.16877215189873,17.3383369414245,21.6770596241445\n\"4\",25.9718317697946,3.19,17.1425390895551,21.5571854296748\n\"6\",23.1723845745727,2.62,19.0775493306446,21.1249669526086\n\"6\",23.1125231041877,2.6306329113924,19.0782895608045,21.0954063324961\n\"6\",23.0528695730455,2.64126582278481,19.0788218517216,21.0658457123835\n\"6\",22.993433572926,2.65189873417722,19.0791366116161,21.036285092271\n\"6\",22.9342252187496,2.66253164556962,19.0792237255673,21.0067244721585\n\"6\",22.8752551778727,2.67316455696203,19.0790725262192,20.9771638520459\n\"6\",22.8165347005907,2.68379746835443,19.0786717632761,20.9476032319334\n\"6\",22.7580756517921,2.69443037974684,19.0780095718497,20.9180426118209\n\"6\",22.699890543671,2.70506329113924,19.0770734397456,20.8884819917083\n\"6\",22.6419925693754,2.71569620253165,19.0758501738162,20.8589213715958\n\"6\",22.5843956374238,2.72632911392405,19.0743258655427,20.8293607514833\n\"6\",22.5271144066764,2.73696202531646,19.072485856065,20.7998001313707\n\"6\",22.4701643215869,2.74759493670886,19.0703147009294,20.7702395112582\n\"6\",22.4135616473952,2.75822784810127,19.0677961348961,20.7406788911456\n\"6\",22.3573235048459,2.76886075949367,19.0649130372203,20.7111182710331\n\"6\",22.3014679039278,2.77949367088608,19.0616473979134,20.6815576509206\n\"6\",22.2460137760314,2.79012658227848,19.0579802855846,20.651997030808\n\"6\",22.1909810038126,2.80075949367089,19.0538918175784,20.6224364106955\n\"6\",22.1363904479253,2.81139240506329,19.0493611332406,20.592875790583\n\"6\",22.0822639696583,2.8220253164557,19.0443663712825,20.5633151704704\n\"6\",22.0286244483649,2.8326582278481,19.0388846523509,20.5337545503579\n\"6\",21.9754957924307,2.84329113924051,19.03289206806,20.5041939302453\n\"6\",21.9229029423707,2.85392405063291,19.026363677895,20.4746333101328\n\"6\",21.870871864499,2.86455696202532,19.0192735155415,20.4450726900203\n\"6\",21.8194295334774,2.87518987341772,19.0115946063381,20.4155120699077\n\"6\",21.7686039019237,2.88582278481013,19.0032989976667,20.3859514497952\n\"6\",21.7184238551734,2.89645569620253,18.9943578041919,20.3563908296827\n\"6\",21.6689191492339,2.90708860759494,18.9847412699063,20.3268302095701\n\"6\",21.6201203299789,2.91772151898734,18.9744188489363,20.2972695894576\n\"6\",21.5720586317122,2.92835443037975,18.9633593069779,20.267708969345\n\"6\",21.5247658533985,2.93898734177215,18.9515308450665,20.2381483492325\n\"6\",21.4782742111402,2.94962025316456,18.9389012470997,20.20858772912\n\"6\",21.432616165881,2.96025316455696,18.9254380521338,20.1790271090074\n\"6\",21.3878242258559,2.97088607594937,18.9111087519339,20.1494664888949\n\"6\",21.3439307239869,2.98151898734177,18.8958810135778,20.1199058687824\n\"6\",21.3009675712443,2.99215189873418,18.8797229260953,20.0903452486698\n\"6\",21.2589659879359,3.00278481012658,18.8626032691787,20.0607846285573\n\"6\",21.2179562159366,3.01341772151899,18.8444918009529,20.0312240084447\n\"6\",21.1779672159739,3.02405063291139,18.8253595606905,20.0016633883322\n\"6\",21.1390263551952,3.0346835443038,18.8051791812441,19.9721027682197\n\"6\",21.1011590912963,3.0453164556962,18.783925204918,19.9425421481071\n\"6\",21.0643886603937,3.05594936708861,18.7615743955954,19.9129815279946\n\"6\",21.0287357765203,3.06658227848101,18.7381060392438,19.8834209078821\n\"6\",20.9942183510101,3.07721518987342,18.713502224529,19.8538602877695\n\"6\",20.9608512400729,3.08784810126582,18.687748095241,19.824299667657\n\"6\",20.9286460284799,3.09848101265823,18.660832066609,19.7947390475445\n\"6\",20.8976108564787,3.10911392405063,18.6327459983851,19.7651784274319\n\"6\",20.8677502958511,3.11974683544304,18.6034853187876,19.7356178073194\n\"6\",20.8390652794599,3.13037974683544,18.5730490949538,19.7060571872068\n\"6\",20.8115530867982,3.14101265822785,18.5414400473904,19.6764965670943\n\"6\",20.785207386061,3.15164556962025,18.5086645079026,19.6469359469818\n\"6\",20.7600183312298,3.16227848101266,18.4747323225087,19.6173753268692\n\"6\",20.7359727107328,3.17291139240506,18.4396567027806,19.5878147067567\n\"6\",20.7130541425258,3.18354430379747,18.4034540307625,19.5582540866442\n\"6\",20.6912433090431,3.19417721518987,18.3661436240201,19.5286934665316\n\"6\",20.6705182244534,3.20481012658228,18.3277474683848,19.4991328464191\n\"6\",20.6508545260602,3.21544303797468,18.2882899265529,19.4695722263065\n\"6\",20.6322257815163,3.22607594936709,18.2477974308717,19.440011606194\n\"6\",20.6146038037327,3.23670886075949,18.2062981684303,19.4104509860815\n\"6\",20.5979589659109,3.2473417721519,18.163821766027,19.3808903659689\n\"6\",20.5822605099377,3.2579746835443,18.1203989817751,19.3513297458564\n\"6\",20.5674768423646,3.26860759493671,18.0760614091232,19.3217691257439\n\"6\",20.5535758132878,3.27924050632911,18.0308411979748,19.2922085056313\n\"6\",20.5405249745576,3.28987341772152,17.9847707964799,19.2626478855188\n\"6\",20.5282918148291,3.30050632911392,17.9378827159833,19.2330872654062\n\"6\",20.5168439699684,3.31113924050633,17.890209320619,19.2035266452937\n\"6\",20.5061494082127,3.32177215189873,17.8417826421496,19.1739660251812\n\"6\",20.4961765902363,3.33240506329114,17.792634219901,19.1444054050686\n\"6\",20.4868946048837,3.34303797468354,17.7427949650285,19.1148447849561\n\"6\",20.4782732818028,3.35367088607595,17.6922950478843,19.0852841648436\n\"6\",20.4702832825505,3.36430379746835,17.6411638069116,19.055723544731\n\"6\",20.462896171969,3.37493670886076,17.589429677268,19.0261629246185\n\"6\",20.4560844717538,3.38556962025316,17.5371201372581,18.9966023045059\n\"6\",20.4498216981771,3.39620253164557,17.4842616706097,18.9670416843934\n\"6\",20.4440823859077,3.40683544303797,17.430879742654,18.9374810642809\n\"6\",20.4388420997957,3.41746835443038,17.376998788541,18.9079204441683\n\"6\",20.4340774363812,3.42810126582278,17.3226422117304,18.8783598240558\n\"6\",20.4297660167573,3.43873417721519,17.2678323911292,18.8487992039433\n\"6\",20.4258864722709,3.44936708860759,17.2125906953905,18.8192385838307\n\"6\",20.4224184243942,3.46,17.1569375030421,18.7896779637182\n\"8\",18.6992958991983,3.17,15.1367057991096,16.9180008491539\n\"8\",18.6025504459053,3.19853164556962,15.1083435287008,16.8554469873031\n\"8\",18.5063553048496,3.22706329113924,15.0794309460548,16.7928931254522\n\"8\",18.4107435277022,3.25559493670886,15.0499349995005,16.7303392636013\n\"8\",18.315750221402,3.28412658227848,15.019820582099,16.6677854017505\n\"8\",18.221412627596,3.3126582278481,14.9890504522032,16.6052315398996\n\"8\",18.1277701911419,3.34118987341772,14.9575851649556,16.5426776780488\n\"8\",18.0348646136681,3.36972151898734,14.9253830187278,16.4801238161979\n\"8\",17.9427398874988,3.39825316455696,14.8924000211953,16.4175699543471\n\"8\",17.851442304536,3.42678481012658,14.8585898804564,16.3550160924962\n\"8\",17.761020433982,3.4553164556962,14.8239040273087,16.2924622306453\n\"8\",17.6715250621331,3.48384810126582,14.7882916754559,16.2299083687945\n\"8\",17.5830090869368,3.51237974683544,14.7516999269504,16.1673545069436\n\"8\",17.495527359662,3.54091139240506,14.7140739305235,16.1048006450928\n\"8\",17.4091364659871,3.56944303797468,14.6753571004967,16.0422467832419\n\"8\",17.3238944391672,3.5979746835443,14.6354914036149,15.9796929213911\n\"8\",17.2398603988275,3.62650632911392,14.5944177202529,15.9171390595402\n\"8\",17.1570941104565,3.65503797468354,14.5520762849222,15.8545851976894\n\"8\",17.0756554629441,3.68356962025316,14.5084072087328,15.7920313358385\n\"8\",16.9956038645804,3.71210126582278,14.4633510833949,15.7294774739876\n\"8\",16.9169975618057,3.7406329113924,14.4168496624679,15.6669236121368\n\"8\",16.8398928895852,3.76916455696203,14.3688466109867,15.6043697502859\n\"8\",16.7643434673734,3.79769620253165,14.3192883094967,15.5418158884351\n\"8\",16.6903993599216,3.82622784810127,14.2681246932468,15.4792620265842\n\"8\",16.6181062272256,3.85475949367089,14.2153101022411,15.4167081647334\n\"8\",16.5475044921959,3.88329113924051,14.160804113569,15.3541543028825\n\"8\",16.4786285576011,3.91182278481013,14.1045723244621,15.2916004410316\n\"8\",16.4115061049729,3.94035443037975,14.0465870533887,15.2290465791808\n\"8\",16.3461575070749,3.96888607594937,13.9868279275849,15.1664927173299\n\"8\",16.2825953820421,3.99741772151899,13.9252823289161,15.1039388554791\n\"8\",16.2208243114707,4.02594936708861,13.8619456757857,15.0413849936282\n\"8\",16.1608407369642,4.05448101265823,13.7968215265906,14.9788311317774\n\"8\",16.1026330405336,4.08301265822785,13.7299214993194,14.9162772699265\n\"8\",16.0461818046536,4.11154430379747,13.6612650114977,14.8537234080756\n\"8\",15.9914602385588,4.14007594936709,13.5908788538908,14.7911695462248\n\"8\",15.9384347493815,4.16860759493671,13.5187966193663,14.7286156843739\n\"8\",15.8870656306358,4.19713924050633,13.4450580144103,14.6660618225231\n\"8\",15.8373078367516,4.22567088607595,13.3697080845928,14.6035079606722\n\"8\",15.7891118109792,4.25420253164557,13.2927963866635,14.5409540988214\n\"8\",15.7424243348589,4.28273417721519,13.2143761390822,14.4784002369705\n\"8\",15.6971893702164,4.31126582278481,13.1345033800229,14.4158463751197\n\"8\",15.6533488687944,4.33979746835443,13.0532361577432,14.3532925132688\n\"8\",15.6108435296072,4.36832911392405,12.9706337732286,14.2907386514179\n\"8\",15.5696134893919,4.39686075949367,12.8867560897423,14.2281847895671\n\"8\",15.5295989366614,4.42539240506329,12.801662918771,14.1656309277162\n\"8\",15.4907406445313,4.45392405063291,12.7154134871994,14.1030770658654\n\"8\",15.4529804214564,4.48245569620253,12.6280659865726,14.0405232040145\n\"8\",15.4162614821927,4.51098734177215,12.5396772021346,13.9779693421637\n\"8\",15.3805287436658,4.53951898734177,12.4503022169598,13.9154154803128\n\"8\",15.3457290520454,4.56805063291139,12.3599941848785,13.8528616184619\n\"8\",15.3118113482838,4.59658227848101,12.2688041649384,13.7903077566111\n\"8\",15.2787267797939,4.62511392405063,12.1767810097265,13.7277538947602\n\"8\",15.2464287659408,4.65364556962025,12.0839712998779,13.6652000329094\n\"8\",15.2148730247105,4.68217721518987,11.9904193174065,13.6026461710585\n\"8\",15.1840175674012,4.71070886075949,11.8961670510141,13.5400923092077\n\"8\",15.1538226675399,4.73924050632911,11.8012542271737,13.4775384473568\n\"8\",15.1242508095215,4.76777215189873,11.7057183614904,13.4149845855059\n\"8\",15.0952666217545,4.79630379746835,11.6095948255557,13.3524307236551\n\"8\",15.0668367983996,4.82483544303797,11.5129169252088,13.2898768618042\n\"8\",15.0389300131448,4.8533670886076,11.415715986762,13.2273229999534\n\"8\",15.0115168278645,4.88189873417722,11.3180214483406,13.1647691381025\n\"8\",14.9845695984917,4.91043037974684,11.2198609540116,13.1022152762517\n\"8\",14.9580623799677,4.93896202531646,11.1212604488339,13.0396614144008\n\"8\",14.9319708317432,4.96749367088608,11.0222442733567,12.97710755255\n\"8\",14.9062721249679,4.9960253164557,10.9228352564302,12.9145536906991\n\"8\",14.8809448522267,5.02455696202532,10.8230548054698,12.8519998288482\n\"8\",14.8559689404472,5.05308860759494,10.7229229935476,12.7894459669974\n\"8\",14.8313255674154,5.08162025316456,10.6224586428776,12.7268921051465\n\"8\",14.8069970821816,5.11015189873418,10.5216794044097,12.6643382432957\n\"8\",14.7829669295166,5.1386835443038,10.420601833373,12.6017843814448\n\"8\",14.7592195784832,5.16721518987342,10.3192414607047,12.539230519594\n\"8\",14.7357404551115,5.19574683544304,10.2176128603747,12.4766766577431\n\"8\",14.7125158791116,5.22427848101266,10.1157297126729,12.4141227958922\n\"8\",14.6895330045135,5.25281012658228,10.0136048635692,12.3515689340414\n\"8\",14.6667797640944,5.2813417721519,9.91125038028669,12.2890150721905\n\"8\",14.6442448174328,5.30987341772152,9.80867760324656,12.2264612103397\n\"8\",14.6219175024161,5.33840506329114,9.70589719456153,12.1639073484888\n\"8\",14.5997877900186,5.36693670886076,9.60291918325737,12.101353486638\n\"8\",14.5778462421665,5.39546835443038,9.49975300740769,12.0387996247871\n\"8\",14.5560839725069,5.424,9.3964075533656,11.9762457629362"
    },
    {
      "name": ".0/model_prediction1",
      "source": ".0/model_prediction1_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": "scale/fill",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"4\"\n\"6\"\n\"8\""
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n8.11722351594386\n36.2592723392223"
    }
  ],
  "scales": [
    {
      "name": "fill",
      "type": "ordinal",
      "domain": {
        "data": "scale/fill",
        "field": "data.domain"
      },
      "points": true,
      "sort": false,
      "range": "category10"
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "group",
      "from": {
        "data": ".0"
      },
      "marks": [
        {
          "type": "symbol",
          "properties": {
            "update": {
              "size": {
                "value": 50
              },
              "fill": {
                "scale": "fill",
                "field": "data.cyl"
              },
              "x": {
                "scale": "x",
                "field": "data.wt"
              },
              "y": {
                "scale": "y",
                "field": "data.mpg"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/model_prediction1"
      },
      "marks": [
        {
          "type": "area",
          "properties": {
            "update": {
              "fill": {
                "scale": "fill",
                "field": "data.cyl"
              },
              "y2": {
                "scale": "y",
                "field": "data.resp_upr_"
              },
              "fillOpacity": {
                "value": 0.2
              },
              "x": {
                "scale": "x",
                "field": "data.pred_"
              },
              "y": {
                "scale": "y",
                "field": "data.resp_lwr_"
              },
              "stroke": {
                "value": "transparent"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/model_prediction1"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/model_prediction1"
      },
      "marks": [
        {
          "type": "line",
          "properties": {
            "update": {
              "stroke": {
                "value": "#000000"
              },
              "strokeWidth": {
                "value": 2
              },
              "x": {
                "scale": "x",
                "field": "data.pred_"
              },
              "y": {
                "scale": "y",
                "field": "data.resp_"
              },
              "fill": {
                "value": "transparent"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/model_prediction1"
              }
            }
          }
        }
      ]
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [
    {
      "orient": "right",
      "fill": "fill",
      "title": "cyl"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id551714835").parseSpec(plot_id551714835_spec);
</script><!--/html_preserve-->

## Stwórzmy pierwszy wykres - zmienna ilościowa - boxplot


```r
mtcars %>%  ggvis(~wt, ~mpg) %>% 
  layer_points() %>%
  scale_numeric("x", domain = c(2,5))
```

<!--html_preserve--><div id="plot_id633896263-container" class="ggvis-output-container">
<div id="plot_id633896263" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id633896263_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id633896263" data-renderer="svg">SVG</a>
 | 
<a id="plot_id633896263_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id633896263" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id633896263_download" class="ggvis-download" data-plot-id="plot_id633896263">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id633896263_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.85\n5.15"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id633896263").parseSpec(plot_id633896263_spec);
</script><!--/html_preserve-->

## Stwórzmy pierwszy wykres - zmiana zakresu


```r
mtcars %>%
  ggvis(x= ~cyl,y = ~mpg)  %>%
  layer_boxplots()
```

<!--html_preserve--><div id="plot_id549566115-container" class="ggvis-output-container">
<div id="plot_id549566115" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id549566115_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id549566115" data-renderer="svg">SVG</a>
 | 
<a id="plot_id549566115_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id549566115" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id549566115_download" class="ggvis-download" data-plot-id="plot_id549566115">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id549566115_spec = {
  "data": [
    {
      "name": ".0/group_by1/boxplot2/align3_flat",
      "format": {
        "type": "csv",
        "parse": {
          "cyl": "number",
          "min_": "number",
          "max_": "number",
          "xmin_": "number",
          "xmax_": "number",
          "lower_": "number",
          "upper_": "number",
          "median_": "number"
        }
      },
      "values": "\"cyl\",\"min_\",\"max_\",\"xmin_\",\"xmax_\",\"lower_\",\"upper_\",\"median_\"\n4,21.4,33.9,3,5,22.8,30.4,26\n6,17.8,21.4,5,7,18.65,21,19.7\n8,13.3,18.7,7,9,14.4,16.25,15.2"
    },
    {
      "name": ".0/group_by1/boxplot2/align3",
      "source": ".0/group_by1/boxplot2/align3_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": ".0/group_by1/boxplot2/align3/boxplot_outliers4_flat",
      "format": {
        "type": "csv",
        "parse": {
          "cyl": "number",
          "value_": "number"
        }
      },
      "values": "\"cyl\",\"value_\"\n8,10.4\n8,10.4\n8,19.2"
    },
    {
      "name": ".0/group_by1/boxplot2/align3/boxplot_outliers4",
      "source": ".0/group_by1/boxplot2/align3/boxplot_outliers4_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n2.7\n9.3"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1/boxplot2/align3"
      },
      "marks": [
        {
          "type": "rect",
          "properties": {
            "update": {
              "stroke": {
                "value": "#000000"
              },
              "fill": {
                "value": "white"
              },
              "x": {
                "scale": "x",
                "field": "data.cyl"
              },
              "y": {
                "scale": "y",
                "field": "data.min_"
              },
              "y2": {
                "scale": "y",
                "field": "data.max_"
              },
              "width": {
                "value": 0.5
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1/boxplot2/align3"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1/boxplot2/align3"
      },
      "marks": [
        {
          "type": "rect",
          "properties": {
            "update": {
              "stroke": {
                "value": "#000000"
              },
              "fill": {
                "value": "white"
              },
              "x": {
                "scale": "x",
                "field": "data.xmin_"
              },
              "x2": {
                "scale": "x",
                "field": "data.xmax_"
              },
              "y": {
                "scale": "y",
                "field": "data.lower_"
              },
              "y2": {
                "scale": "y",
                "field": "data.upper_"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1/boxplot2/align3"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1/boxplot2/align3"
      },
      "marks": [
        {
          "type": "rect",
          "properties": {
            "update": {
              "stroke": {
                "value": "#000000"
              },
              "fill": {
                "value": "white"
              },
              "x": {
                "scale": "x",
                "field": "data.xmin_"
              },
              "x2": {
                "scale": "x",
                "field": "data.xmax_"
              },
              "y": {
                "scale": "y",
                "field": "data.median_"
              },
              "height": {
                "value": 1
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1/boxplot2/align3"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1/boxplot2/align3/boxplot_outliers4"
      },
      "marks": [
        {
          "type": "symbol",
          "properties": {
            "update": {
              "size": {
                "value": 50
              },
              "fill": {
                "value": "black"
              },
              "x": {
                "scale": "x",
                "field": "data.cyl"
              },
              "y": {
                "scale": "y",
                "field": "data.value_"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1/boxplot2/align3/boxplot_outliers4"
              }
            }
          }
        }
      ]
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "cyl"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id549566115").parseSpec(plot_id549566115_spec);
</script><!--/html_preserve-->

## Grafika interaktywna - etykiety punktów


```r
mtcars %>%  
  mutate(type=rownames(.)) %>% 
  slice(1:10) %>%
  ggvis(~wt, ~mpg, shape= ~type) %>% 
  layer_points() %>%
  add_tooltip( function(x) x$type, 'hover')
```

<!--html_preserve--><div id="plot_id938558549-container" class="ggvis-output-container">
<div id="plot_id938558549" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id938558549_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id938558549" data-renderer="svg">SVG</a>
 | 
<a id="plot_id938558549_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id938558549" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id938558549_download" class="ggvis-download" data-plot-id="plot_id938558549">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id938558549_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"type\",\"wt\",\"mpg\"\n\"Mazda RX4\",2.62,21\n\"Mazda RX4 Wag\",2.875,21\n\"Datsun 710\",2.32,22.8\n\"Hornet 4 Drive\",3.215,21.4\n\"Hornet Sportabout\",3.44,18.7\n\"Valiant\",3.46,18.1\n\"Duster 360\",3.57,14.3\n\"Merc 240D\",3.19,24.4\n\"Merc 230\",3.15,22.8\n\"Merc 280\",3.44,19.2"
    },
    {
      "name": "scale/shape",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"Mazda RX4\"\n\"Mazda RX4 Wag\"\n\"Datsun 710\"\n\"Hornet 4 Drive\"\n\"Hornet Sportabout\"\n\"Valiant\"\n\"Duster 360\"\n\"Merc 240D\"\n\"Merc 230\"\n\"Merc 280\""
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n2.2575\n3.6325"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n13.795\n24.905"
    }
  ],
  "scales": [
    {
      "name": "shape",
      "type": "ordinal",
      "domain": {
        "data": "scale/shape",
        "field": "data.domain"
      },
      "points": true,
      "sort": false,
      "range": "shapes"
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "shape": {
            "scale": "shape",
            "field": "data.type"
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [
    {
      "orient": "right",
      "shape": "shape",
      "title": "type"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id938558549").parseSpec(plot_id938558549_spec);
</script><!--/html_preserve-->

## Grafika interaktywna - etykiety punktów (1)


```r
all_values <- function(x) {
  if(is.null(x)) return(NULL)
  paste0(names(x), ": ", format(x), collapse = "<br />")
}
base <- mtcars %>% ggvis(x = ~wt, y = ~mpg) %>%
  layer_points()
base %>% add_tooltip(all_values, "hover")
```

<!--html_preserve--><div id="plot_id451185686-container" class="ggvis-output-container">
<div id="plot_id451185686" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id451185686_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id451185686" data-renderer="svg">SVG</a>
 | 
<a id="plot_id451185686_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id451185686" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id451185686_download" class="ggvis-download" data-plot-id="plot_id451185686">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id451185686_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id451185686").parseSpec(plot_id451185686_spec);
</script><!--/html_preserve-->

## Suwaki


```r
mtcars %>%
  ggvis(x= ~wt,y = ~mpg)  %>%
  layer_points(size := input_slider(1, 50, step = 5)) %>%
  layer_smooths(span  = input_slider(0.5, 2, step = 0.1))
```

<!--html_preserve--><div id="plot_id731898686-container" class="ggvis-output-container">
<div id="plot_id731898686" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id731898686_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id731898686" data-renderer="svg">SVG</a>
 | 
<a id="plot_id731898686_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id731898686" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id731898686_download" class="ggvis-download" data-plot-id="plot_id731898686">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id731898686_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number",
          "reactive_583721009": "number"
        }
      },
      "values": "\"wt\",\"mpg\",\"reactive_583721009\"\n2.62,21,26\n2.875,21,26\n2.32,22.8,26\n3.215,21.4,26\n3.44,18.7,26\n3.46,18.1,26\n3.57,14.3,26\n3.19,24.4,26\n3.15,22.8,26\n3.44,19.2,26\n3.44,17.8,26\n4.07,16.4,26\n3.73,17.3,26\n3.78,15.2,26\n5.25,10.4,26\n5.424,10.4,26\n5.345,14.7,26\n2.2,32.4,26\n1.615,30.4,26\n1.835,33.9,26\n2.465,21.5,26\n3.52,15.5,26\n3.435,15.2,26\n3.84,13.3,26\n3.845,19.2,26\n1.935,27.3,26\n2.14,26,26\n1.513,30.4,26\n3.17,15.8,26\n2.77,19.7,26\n3.57,15,26\n2.78,21.4,26"
    },
    {
      "name": ".0/model_prediction1",
      "format": {
        "type": "csv",
        "parse": {
          "pred_": "number",
          "resp_": "number"
        }
      },
      "values": "\"pred_\",\"resp_\"\n1.513,32.3796111769004\n1.56250632911392,31.8950960142266\n1.61201265822785,31.4163588315591\n1.66151898734177,30.9433874140949\n1.7110253164557,30.476169547031\n1.76053164556962,30.0146930155645\n1.81003797468354,29.5589456048925\n1.85954430379747,29.1089151002118\n1.90905063291139,28.6645892867197\n1.95855696202532,28.2259559496131\n2.00806329113924,27.793002874089\n2.05756962025316,27.3657178453445\n2.10707594936709,26.9440886485767\n2.15658227848101,26.5281030689825\n2.20608860759494,26.117748891759\n2.25559493670886,25.7130139021032\n2.30510126582278,25.3138858852122\n2.35460759493671,24.9203526262831\n2.40411392405063,24.5324019105127\n2.45362025316456,24.1500215230982\n2.50312658227848,23.7727625255501\n2.55263291139241,23.39975736759\n2.60213924050633,23.0312238653324\n2.65164556962025,22.6674211302321\n2.70115189873418,22.3086082737441\n2.7506582278481,21.9550444073233\n2.80016455696203,21.6069886424247\n2.84967088607595,21.264700090503\n2.89917721518987,20.9284378630132\n2.9486835443038,20.5984610714102\n2.99818987341772,20.275028827149\n3.04769620253165,19.9584002416844\n3.09720253164557,19.6488344264713\n3.14670886075949,19.3465904929647\n3.19621518987342,19.0519275526194\n3.24572151898734,18.7650731740138\n3.29522784810127,18.4858293509999\n3.34473417721519,18.213692762706\n3.39424050632911,17.9481534261248\n3.44374683544304,17.6887013582487\n3.49325316455696,17.4348265760703\n3.54275949367089,17.186019096582\n3.59226582278481,16.9419006402064\n3.64177215189873,16.7031161412066\n3.69127848101266,16.4698449164347\n3.74078481012658,16.2420953093877\n3.79029113924051,16.0198756635623\n3.83979746835443,15.8031943224551\n3.88930379746835,15.5920596295631\n3.93881012658228,15.3864799283829\n3.9883164556962,15.1864635624113\n4.03782278481013,14.9920188751452\n4.08732911392405,14.8031542100811\n4.13683544303798,14.619877910716\n4.1863417721519,14.4421983205465\n4.23584810126582,14.2701237830694\n4.28535443037975,14.1036626417816\n4.33486075949367,13.9428232401797\n4.3843670886076,13.7876139217605\n4.43387341772152,13.6380430300208\n4.48337974683544,13.4941189084573\n4.53288607594937,13.3558499005668\n4.58239240506329,13.2232443498461\n4.63189873417722,13.096310599792\n4.68140506329114,12.9750569939011\n4.73091139240506,12.8594918756703\n4.78041772151899,12.7496235885963\n4.82992405063291,12.6454604761758\n4.87943037974684,12.5470108819058\n4.92893670886076,12.4542831492828\n4.97844303797468,12.3672856218037\n5.02794936708861,12.2860266429652\n5.07745569620253,12.2105145562641\n5.12696202531646,12.1407577051972\n5.17646835443038,12.0767644332612\n5.2259746835443,12.0185430839529\n5.27548101265823,11.966102000769\n5.32498734177215,11.9194495272063\n5.37449367088608,11.8785940067616\n5.424,11.8435437829316"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          },
          "size": {
            "field": "data.reactive_583721009"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    },
    {
      "type": "line",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "strokeWidth": {
            "value": 2
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_"
          },
          "fill": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/model_prediction1"
          }
        }
      },
      "from": {
        "data": ".0/model_prediction1"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id731898686").parseSpec(plot_id731898686_spec);
</script><!--/html_preserve-->

## Suwaki


```r
mtcars %>%
  ggvis(x= ~mpg) %>%
  layer_histograms(width = input_slider(1, 10, step = 1))
```

<!--html_preserve--><div id="plot_id720740739-container" class="ggvis-output-container">
<div id="plot_id720740739" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id720740739_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id720740739" data-renderer="svg">SVG</a>
 | 
<a id="plot_id720740739_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id720740739" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id720740739_download" class="ggvis-download" data-plot-id="plot_id720740739">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id720740739_spec = {
  "data": [
    {
      "name": ".0/bin1/stack2",
      "format": {
        "type": "csv",
        "parse": {
          "xmin_": "number",
          "xmax_": "number",
          "stack_upr_": "number",
          "stack_lwr_": "number"
        }
      },
      "values": "\"xmin_\",\"xmax_\",\"stack_upr_\",\"stack_lwr_\"\n7.5,12.5,2,0\n12.5,17.5,10,0\n17.5,22.5,11,0\n22.5,27.5,5,0\n27.5,32.5,3,0\n32.5,37.5,1,0"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n6\n39"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n11.55"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "rect",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "fill": {
            "value": "#333333"
          },
          "x": {
            "scale": "x",
            "field": "data.xmin_"
          },
          "x2": {
            "scale": "x",
            "field": "data.xmax_"
          },
          "y": {
            "scale": "y",
            "field": "data.stack_upr_"
          },
          "y2": {
            "scale": "y",
            "field": "data.stack_lwr_"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/bin1/stack2"
          }
        }
      },
      "from": {
        "data": ".0/bin1/stack2"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "count"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id720740739").parseSpec(plot_id720740739_spec);
</script><!--/html_preserve-->

## Podstawowe suwaki

* input_checkbox(): a check-box
* input_checkboxgroup(): a group of check boxes
* input_numeric(): a spin box
* input_radiobuttons(): pick one from a set options
* input_select(): create a drop-down text box
* input_text(): arbitrary text input

## Bardziej zaawansowane suwaki


```r
mtcars %>% ggvis(x = ~wt) %>%
    layer_densities(
      adjust = input_slider(.1, 2, value = 1, step = .1, label = "Bandwidth adjustment"),
      kernel = input_select(
        c("Gaussian" = "gaussian",
          "Epanechnikov" = "epanechnikov",
          "Rectangular" = "rectangular",
          "Triangular" = "triangular",
          "Biweight" = "biweight",
          "Cosine" = "cosine",
          "Optcosine" = "optcosine"),
        label = "Kernel")
    )
```

<!--html_preserve--><div id="plot_id514959790-container" class="ggvis-output-container">
<div id="plot_id514959790" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id514959790_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id514959790" data-renderer="svg">SVG</a>
 | 
<a id="plot_id514959790_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id514959790" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id514959790_download" class="ggvis-download" data-plot-id="plot_id514959790">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id514959790_spec = {
  "data": [
    {
      "name": ".0/density1",
      "format": {
        "type": "csv",
        "parse": {
          "pred_": "number",
          "resp_": "number"
        }
      },
      "values": "\"pred_\",\"resp_\"\n0.47657276119403,0.000588305747859967\n0.500038857184665,0.000724273083006106\n0.5235049531753,0.00089018705044427\n0.546971049165935,0.00108639939899364\n0.57043714515657,0.00132202357771974\n0.593903241147205,0.00160228383342274\n0.61736933713784,0.0019293060413711\n0.640835433128475,0.0023199484048341\n0.66430152911911,0.00277373177947856\n0.687767625109745,0.00329897159395509\n0.71123372110038,0.00391592050709679\n0.734699817091015,0.00462020854905098\n0.75816591308165,0.00543105642564581\n0.781632009072285,0.00636122905954198\n0.80509810506292,0.00740902990206436\n0.828564201053556,0.00860665962140432\n0.852030297044191,0.00995092627877982\n0.875496393034826,0.0114478928900423\n0.898962489025461,0.0131380338308608\n0.922428585016096,0.0150003605143442\n0.945894681006731,0.0170589587074326\n0.969360776997366,0.0193336408734796\n0.992826872988001,0.0218073027330216\n1.01629296897864,0.0245167988061496\n1.03975906496927,0.0274522481725405\n1.06322516095991,0.0306031950015479\n1.08669125695054,0.0340176945552008\n1.11015735294118,0.0376512150966534\n1.13362344893181,0.0415147783711084\n1.15708954492245,0.0456236581361032\n1.18055564091308,0.0499397569574341\n1.20402173690372,0.0544801938390768\n1.22748783289435,0.0592261890143605\n1.25095392888499,0.0641496857588712\n1.27442002487562,0.0692672807927108\n1.29788612086626,0.0745350664949882\n1.32135221685689,0.0799387963862219\n1.34481831284753,0.0854730845112284\n1.36828440883816,0.0910989118296549\n1.3917505048288,0.0968039845543404\n1.41521660081943,0.10256505697024\n1.43868269681007,0.108356278936408\n1.4621487928007,0.114158052603272\n1.48561488879134,0.119947620380374\n1.50908098478197,0.125706241141974\n1.53254708077261,0.131406117950836\n1.55601317676324,0.13703877379697\n1.57947927275388,0.142581704367193\n1.60294536874451,0.148015308507181\n1.62641146473515,0.153339098776507\n1.64987756072578,0.158523637620211\n1.67334365671642,0.163569769293107\n1.69680975270705,0.168477769214092\n1.72027584869769,0.173211707121597\n1.74374194468832,0.177797160097589\n1.76720804067896,0.182221148588676\n1.79067413666959,0.186470128321247\n1.81414023266023,0.190565894223406\n1.83760632865086,0.194489046743278\n1.8610724246415,0.198249312190565\n1.88453852063213,0.201861258388592\n1.90800461662277,0.205299759984403\n1.9314707126134,0.208595101735944\n1.95493680860404,0.21174720371779\n1.97840290459467,0.214746128558949\n2.00186900058531,0.217619055710213\n2.02533509657594,0.220358250314979\n2.04880119256658,0.222972351354043\n2.07226728855721,0.22547937185284\n2.09573338454785,0.227869145533736\n2.11919948053848,0.230164118536311\n2.14266557652912,0.232373069642056\n2.16613167251975,0.234493957333701\n2.18959776851039,0.236550276116201\n2.21306386450102,0.238546825000922\n2.23652996049166,0.2404944940664\n2.25999605648229,0.242409856403358\n2.28346215247293,0.244302118591343\n2.30692824846356,0.246187154052006\n2.3303943444542,0.248078195078307\n2.35386044044483,0.249994054456612\n2.37732653643547,0.251945864480615\n2.4007926324261,0.253952088341491\n2.42425872841674,0.256034439307748\n2.44772482440737,0.258200157685418\n2.47119092039801,0.260480234840795\n2.49465701638864,0.262887276040962\n2.51812311237928,0.265429623289555\n2.54158920836992,0.268157623850324\n2.56505530436055,0.271060870502926\n2.58852140035119,0.274165981418292\n2.61198749634182,0.277514909239932\n2.63545359233246,0.281093306433413\n2.65891968832309,0.284948842850159\n2.68238578431373,0.28909478862154\n2.70585188030436,0.293522692859792\n2.729317976295,0.298303373644743\n2.75278407228563,0.303405492454256\n2.77625016827627,0.308842781005075\n2.7997162642669,0.314672468825679\n2.82318236025754,0.320841951350047\n2.84664845624817,0.327388009296796\n2.87011455223881,0.334313528401153\n2.89358064822944,0.341574309208405\n2.91704674422008,0.34921230263341\n2.94051284021071,0.357172196848272\n2.96397893620135,0.365422564268619\n2.98744503219198,0.373979658968043\n3.01091112818262,0.382757040499513\n3.03437722417325,0.391729418297882\n3.05784332016389,0.400851445916785\n3.08130941615452,0.410052258391934\n3.10477551214516,0.41927464669286\n3.12824160813579,0.428446903986893\n3.15170770412643,0.437506444591615\n3.17517380011706,0.446337359525645\n3.1986398961077,0.45489908932678\n3.22210599209833,0.463097299356939\n3.24557208808897,0.470808274881651\n3.2690381840796,0.47801645916918\n3.29250428007024,0.484571980663196\n3.31597037606087,0.490414712483011\n3.33943647205151,0.495532896974292\n3.36290256804214,0.499707356577843\n3.38636866403278,0.503007430520713\n3.40983476002341,0.50536374270938\n3.43330085601405,0.506604746402882\n3.45676695200468,0.506855170831414\n3.48023304799532,0.505979448983149\n3.50369914398595,0.503956733075168\n3.52716523997659,0.50088835859495\n3.55063133596722,0.49659690704771\n3.57409743195786,0.49122849476299\n3.59756352794849,0.484822634537357\n3.62102962393913,0.477245134425987\n3.64449571992976,0.468722266350565\n3.6679618159204,0.459220073914058\n3.69142791191103,0.448764231534265\n3.71489400790167,0.437520186859911\n3.7383601038923,0.425444151111721\n3.76182619988294,0.412676555651337\n3.78529229587357,0.399324822957639\n3.80875839186421,0.385364423059024\n3.83222448785484,0.370981801407406\n3.85569058384548,0.356228145313849\n3.87915667983611,0.341168107887202\n3.90262277582675,0.325918851310435\n3.92608887181738,0.31054146377493\n3.94955496780802,0.295122987954801\n3.97302106379865,0.279735015276659\n3.99648715978929,0.264467545839267\n4.01995325577992,0.249369736702943\n4.04341935177056,0.234506533148838\n4.06688544776119,0.219969822244311\n4.09035154375183,0.205765187230396\n4.11381763974246,0.1919802320046\n4.1372837357331,0.178655774985774\n4.16074983172373,0.165785320026581\n4.18421592771437,0.153487025119876\n4.207682023705,0.141720132216641\n4.23114811969564,0.130502843513284\n4.25461421568627,0.119939299117928\n4.27808031167691,0.109941933547032\n4.30154640766754,0.100573865508889\n4.32501250365818,0.0918569491044449\n4.34847859964882,0.0837247867257952\n4.37194469563945,0.0762698518184738\n4.39541079163009,0.0694291663623666\n4.41887688762072,0.0631720210349336\n4.44234298361136,0.0576020887132944\n4.46580907960199,0.0525948484625016\n4.48927517559263,0.0481822537167722\n4.51274127158326,0.0443877465111966\n4.5362073675739,0.0411245045719512\n4.55967346356453,0.0384521532829531\n4.58313955955517,0.0363230471916599\n4.6066056555458,0.034686678331604\n4.63007175153644,0.0336253856736586\n4.65353784752707,0.0330310415821457\n4.67700394351771,0.0329088119494924\n4.70047003950834,0.0332853095966733\n4.72393613549898,0.034074605079647\n4.74740223148961,0.0353050008600573\n4.77086832748025,0.0369437710637535\n4.79433442347088,0.0389346713187357\n4.81780051946152,0.0413133346664632\n4.84126661545215,0.0440016087874552\n4.86473271144279,0.0469737451832132\n4.88819880743342,0.0502319019268268\n4.91166490342406,0.0536994689174903\n4.93513099941469,0.057359688560771\n4.95859709540533,0.0611727868175278\n4.98206319139596,0.0650845858409955\n5.0055292873866,0.0690625448997926\n5.02899538337723,0.073054448450008\n5.05246147936787,0.0770177515057958\n5.0759275753585,0.0808926599718601\n5.09939367134914,0.0846479612648479\n5.12285976733977,0.0882287774067613\n5.14632586333041,0.0915781162196236\n5.16979195932104,0.0946825828069427\n5.19325805531168,0.0974630656383904\n5.21672415130231,0.0999038074609484\n5.24019024729295,0.10199689700958\n5.26365634328358,0.103636132214907\n5.28712243927422,0.104876362760662\n5.31058853526485,0.105678210963512\n5.33405463125549,0.105991737776539\n5.35752072724612,0.105875999877197\n5.38098682323676,0.105278066834482\n5.40445291922739,0.104221730637657\n5.42791901521803,0.102755262955625\n5.45138511120866,0.100822121610224\n5.4748512071993,0.0985116212588494\n5.49831730318993,0.0958431761950774\n5.52178339918057,0.0928091563510123\n5.5452494951712,0.0894973863739413\n5.56871559116184,0.0859177346803468\n5.59218168715247,0.0821128653800113\n5.61564778314311,0.0781427681369737\n5.63911387913374,0.0740263647030907\n5.66257997512438,0.0698214666825946\n5.68604607111501,0.065566733331274\n5.70951216710565,0.0612987238240995\n5.73297826309628,0.0570549899176621\n5.75644435908692,0.0528708488687483\n5.77991045507755,0.0487812647557613\n5.80337655106819,0.0448011611297671\n5.82684264705882,0.040972798817257\n5.85030874304946,0.0373044403840629\n5.87377483904009,0.0338018282719775\n5.89724093503073,0.0305137421689991\n5.92070703102136,0.02741170956353\n5.944173127012,0.0245134888958931\n5.96763922300263,0.0218364984542014\n5.99110531899327,0.0193523804323015\n6.0145714149839,0.0170834811516879\n6.03803751097454,0.0150147552741877\n6.06150360696517,0.0131250651432092\n6.08496970295581,0.0114398163944226\n6.10843579894645,0.00991867478030013\n6.13190189493708,0.00855704008494729\n6.15536799092772,0.00736022989079238\n6.17883408691835,0.00629409526651261\n6.20230018290898,0.00536159351487884\n6.22576627889962,0.00454929609457796\n6.24923237489025,0.00383612098897808\n6.27269847088089,0.00322758920329382\n6.29616456687152,0.00270097417850957\n6.31963066286216,0.00224701018477417\n6.34309675885279,0.00186649434899077\n6.36656285484343,0.00154011874867969\n6.39002895083407,0.00126553506510707\n6.4134950468247,0.00103676805954036\n6.43696114281534,0.000843276202509991\n6.46042723880597,0.000684690514374745"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.177380037313432\n6.75961996268657"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n-0.0253427585415707\n0.532197929372985"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "area",
      "properties": {
        "update": {
          "fill": {
            "value": "#333333"
          },
          "y2": {
            "scale": "y",
            "value": 0
          },
          "fillOpacity": {
            "value": 0.2
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_"
          },
          "stroke": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/density1"
          }
        }
      },
      "from": {
        "data": ".0/density1"
      }
    },
    {
      "type": "line",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_"
          },
          "fill": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/density1"
          }
        }
      },
      "from": {
        "data": ".0/density1"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "density"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id514959790").parseSpec(plot_id514959790_spec);
</script><!--/html_preserve-->

## Opcje wykresów

* add_axis(vis, "x")
* add_axis(vis, "y")
* add_legend(vis, "stroke")
* add_legend(vis, "size")

Możemy zmieniać: 

* title
* orient
* title_offset
* format
* ticks

i wiele innych

## Opcje wykresów - przykład


```r
mtcars %>%
  ggvis(x= ~wt,y = ~mpg) %>%
  add_axis('x', title='Weight (lb/1000') %>%
  add_axis('y', title = 'Miles/(US) gallon')
```

<!--html_preserve--><div id="plot_id219950834-container" class="ggvis-output-container">
<div id="plot_id219950834" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id219950834_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id219950834" data-renderer="svg">SVG</a>
 | 
<a id="plot_id219950834_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id219950834" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id219950834_download" class="ggvis-download" data-plot-id="plot_id219950834">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id219950834_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "title": "Weight (lb/1000",
      "layer": "back",
      "grid": true
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "title": "Miles/(US) gallon",
      "layer": "back",
      "grid": true
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id219950834").parseSpec(plot_id219950834_spec);
</script><!--/html_preserve-->

## Opcje wykresów - zmiana skali osi


```r
mtcars %>%
  ggvis(x= ~wt,y = ~mpg) %>%
  add_axis('x', title='Weight (lb/1000') %>%
  add_axis('y', title = 'Miles/(US) gallon') %>%
  scale_numeric("x", trans="log") %>%
  scale_numeric("y", trans="log")
```

<!--html_preserve--><div id="plot_id120751361-container" class="ggvis-output-container">
<div id="plot_id120751361" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id120751361_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id120751361" data-renderer="svg">SVG</a>
 | 
<a id="plot_id120751361_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id120751361" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id120751361_download" class="ggvis-download" data-plot-id="plot_id120751361">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id120751361_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "type": "log",
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "type": "log",
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "width": 336,
  "height": 336,
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "title": "Weight (lb/1000",
      "layer": "back",
      "grid": true
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "title": "Miles/(US) gallon",
      "layer": "back",
      "grid": true
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 336,
    "height": 336
  },
  "handlers": null
};
ggvis.getPlot("plot_id120751361").parseSpec(plot_id120751361_spec);
</script><!--/html_preserve-->

## Opcje wykresów - zmiana skali osi

Wspierane typy osi:

* numeric For continuous numeric values.
* nominal For character vectors and factors.
* ordinal For ordered factors (these presently behave the same as nominal).
* logical For logical (TRUE/FALSE) values.
* datetime For dates and date-times.

## Źródła:

* http://ggvis.rstudio.com/ggvis-basics.html 
* http://ggvis.rstudio.com/properties-scales.html
* http://ggvis.rstudio.com/axes-legends.html
* https://github.com/pbiecek/TechnikiWizualizacjiDanych/blob/master/MINI_MIMUW_2014/materialy_z_wykladow_i_lab/ggvis/ggvis.Rmd
